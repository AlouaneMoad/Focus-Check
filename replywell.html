<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ReplyWell Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            --bg-primary: url("background.webp");
            --bg-secondary: rgba(20, 26, 41, 0.75); 
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --border-primary: #475569;
            --accent-primary: #84cc16; /* Lime green for a fresh look */
            --accent-hover: #65a30d;
        }

        body {
            background-image: var(--bg-primary);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            font-family: "Inter", "Noto Sans SC", sans-serif;
            color: var(--text-primary);
            overflow: hidden;
        }

        /* --- NEW: Loading Screen Styles --- */
        #loading-screen { 
            background-image: url('loading.webp');
            background-size: cover;
            background-position: center;
            transition: opacity 0.5s ease;
        }
        #loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .exit-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: var(--bg-secondary);
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 600;
            border: 1px solid var(--border-primary);
            transition: all 0.2s ease-in-out;
            text-decoration: none;
            color: var(--text-primary);
        }
        .exit-btn:hover {
            background-color: #334155;
            transform: scale(1.05);
        }
        
        .main-container, .modal-card {
            background-color: var(--bg-secondary);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--border-primary);
            border-radius: 1.5rem;
            padding: 2rem;
            width: 100%;
            max-width: 500px;
        }

        .main-container {
            height: 70vh;
            display: flex;
            flex-direction: column;
        }

        .chat-window {
            flex-grow: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .message-bubble {
            padding: 0.75rem 1rem;
            border-radius: 1.25rem;
            max-width: 80%;
            line-height: 1.5;
        }
        .message-bubble.incoming {
            background-color: #334155;
            border-bottom-left-radius: 0.25rem;
            align-self: flex-start;
        }
        .message-bubble.outgoing {
            background-color: var(--accent-primary);
            color: #1e293b;
            font-weight: 500;
            border-bottom-right-radius: 0.25rem;
            align-self: flex-end;
        }
        .message-bubble.feedback {
            background-color: transparent;
            border: 2px dashed var(--border-primary);
            color: var(--text-secondary);
            font-size: 0.875rem;
            align-self: center;
            max-width: 100%;
            text-align: center;
        }
        
        .choice-btn {
            background-color: #334155;
            border: 1px solid var(--border-primary);
            color: var(--text-primary);
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.75rem;
            text-align: left;
            transition: all 0.2s ease-in-out;
        }
        .choice-btn:hover {
            border-color: var(--accent-primary);
            background-color: #475569;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div id="loading-screen" class="fixed inset-0 z-50 flex items-center justify-center">
        <div class="text-center">
            <img src="icon.png" alt="Loading Icon" class="w-20 h-20 mx-auto mb-4 animate-bounce">
            <p class="text-lg font-semibold">Loading Simulator...</p>
        </div>
    </div>

    <header class="absolute top-8 left-8 z-50">
        <a href="index.html" class="exit-btn">
            <i class="fa-solid fa-arrow-left"></i>
            <span data-translate-key="exit_button">Exit</span>
        </a>
    </header>

    <div id="language-modal" class="hidden fixed inset-0 z-40 flex items-center justify-center p-4">
        <div class="modal-card text-center">
            <h1 class="text-2xl font-bold mb-6">Choose Language / é€‰æ‹©è¯­è¨€</h1>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <button id="lang-en-btn" class="w-full px-6 py-3 font-semibold text-white rounded-lg bg-red-600 hover:bg-red-700 transition-colors duration-300">English</button>
                <button id="lang-zh-btn" class="w-full px-6 py-3 font-semibold text-white rounded-lg bg-green-600 hover:bg-green-700 transition-colors duration-300">ä¸­æ–‡ (Chinese)</button>
            </div>
        </div>
    </div>

    <div id="app-wrapper" class="hidden flex-col items-center">
        <div id="welcome-screen" class="main-container text-center justify-center items-center">
            <h1 class="text-3xl font-bold mb-2" data-translate-key="welcome_title"></h1>
            <p class="text-slate-300 mb-6 max-w-sm" data-translate-key="welcome_subtitle"></p>
            <button id="start-btn" class="px-8 py-3 font-semibold text-white rounded-lg bg-[var(--accent-primary)] hover:bg-[var(--accent-hover)] transition-colors duration-300" data-translate-key="start_button"></button>
        </div>

        <div id="simulator-screen" class="main-container hidden">
            <div id="chat-window" class="chat-window p-2"></div>
            <div id="choices-container" class="mt-4 flex flex-col gap-2"></div>
        </div>

        <div id="summary-screen" class="main-container text-center justify-center items-center hidden">
            <h1 class="text-3xl font-bold mb-2" data-translate-key="summary_title"></h1>
            <p class="text-slate-300 mb-6 max-w-sm" data-translate-key="summary_subtitle"></p>
            <button id="practice-again-btn" class="px-8 py-3 font-semibold text-white rounded-lg bg-[var(--accent-primary)] hover:bg-[var(--accent-hover)] transition-colors duration-300" data-translate-key="practice_again_button"></button>
        </div>

        <footer class="text-center pt-4">
            <button id="change-lang-btn" class="text-sm text-[var(--accent-primary)] hover:underline" data-translate-key="change_language_button"></button>
        </footer>
    </div>

    <script>
    (function () {
        const CLICK_SOUND_SRC = 'click.mp3'; 
        function playClickSound() {
            try {
                const audio = new Audio(CLICK_SOUND_SRC);
                audio.play().catch(err => console.warn('Click sound play failed:', err));
            } catch (err) {
                console.warn('Error creating/playing click audio:', err);
            }
        }

        document.body.addEventListener('click', function (e) {
            const actionable = e.target.closest('button, a.exit-btn');
            if (!actionable || actionable.disabled) return;
            playClickSound();
        });
    })();
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const AppState = { currentLanguage: 'en', currentScenarioIndex: 0 };

            const Translations = {
                en: {
                    exit_button: "Exit",
                    welcome_title: "ReplyWell Simulator",
                    welcome_subtitle: "Practice handling common, high-pressure text messages in a safe space. No real people, no real pressure.",
                    start_button: "Start First Scenario",
                    summary_title: "Key Takeaway",
                    summary_subtitle: "Mindful communication isn't about ignoring peopleâ€”it's about responding in a way that respects both them and yourself. Setting boundaries is healthy.",
                    practice_again_button: "Practice Again",
                    next_scenario_button: "Next Scenario â†’",
                    view_summary_button: "View Summary â†’",
                    action_text: "You chose to: ",
                    change_language_button: "åˆ‡æ¢è¯­è¨€ (Switch Language)",
                    scenarios: [
                        { message: "Hey, you there?? I need that report draft now, can you send it?", choices: [
                            { text: "So sorry for the delay! Yes, on it right now!", feedback: "This works, but always prioritizing others' urgency can lead to burnout." },
                            { text: "Hey! I'm in the middle of something but I can get that to you in about 15 minutes.", feedback: "Excellent! You acknowledged the request, managed expectations, and protected your own focus." },
                            { text: "(Ignore the message for now)", feedback: "Ignoring can sometimes create more anxiety for everyone. A quick message to set expectations is often less stressful." }
                        ]},
                        { message: "Sorry to bother you so late, but can you just quickly look over these slides for the morning meeting?", choices: [
                            { text: "No problem, send them over.", feedback: "It's generous to help, but working late can affect your sleep and well-being. Protect your personal time." },
                            { text: "Hi! I'm actually offline for the evening, but I'll make it the first thing I look at in the morning.", feedback: "A perfect response. You set a clear, polite boundary while still being a team player." },
                            { text: "I'm already in bed.", feedback: "While honest, this can sometimes come across as a bit blunt. A slightly more formal boundary can be helpful for work." }
                        ]},
                        { message: "What are you up to tonight? A few of us are going out.", choices: [
                            { text: "Nothing, where are you guys going?!", feedback: "It's great to be spontaneous, but always check in with yourself first. Are you joining from excitement or from a fear of missing out?" },
                            { text: "Sounds fun! I'm staying in tonight to recharge, but have a great time!", feedback: "A wonderful way to decline. You were positive while still prioritizing your own need for rest." },
                            { text: "(Leave them on read while you decide)", feedback: "This can leave your friends hanging and cause you stress. A quick, honest 'no' is often kinder than a slow, uncertain 'maybe'." }
                        ]},
                        { message: "Your friend sends a photo from a lavish vacation: 'Having the most amazing time in Bali! You should've come!'", choices: [
                            { text: "'Wow, so jealous! Looks incredible!'", feedback: "It's natural to feel a pang of envy. Acknowledging their fun is good, but remember to be mindful of how their highlights affect your own feelings." },
                            { text: "'Amazing! So happy for you. Hope you're having a wonderful time.'", feedback: "A great, supportive response that celebrates their joy without diminishing your own state. This is a healthy way to react to social media comparison." },
                            { text: "(Just 'like' the message and don't reply)", feedback: "This is a low-effort response. If you're feeling down, it's okay to disengage, but a short, kind message can be better for the friendship." }
                        ]},
                        { message: "From your group project chat: 'Have you started on your part of the research? Or should we just get ChatGPT to write it?'", choices: [
                            { text: "'Let's just use ChatGPT, it will be faster.'", feedback: "While tempting for speed, over-relying on AI can prevent you from learning. This can increase dependency anxiety in the long run." },
                            { text: "'I've started my research. We can use AI for ideas or to polish our writing, but we should write the core part ourselves.'", feedback: "This is a balanced and ethical approach. It uses AI as a tool without sacrificing the integrity of your own work and learning." },
                            { text: "'I don't trust AI for this.'", feedback: "It's wise to be cautious. A more constructive approach might be to suggest specific ways it *can* be used, defining clear boundaries for the team." }
                        ]},
                        { message: "You see '20+ unread messages' in your Family Group Chat. The latest is from your aunt: 'Did everyone see the article I sent about the new health scare?'", choices: [
                            { text: "(Feel stressed and mute the chat)", feedback: "Muting is a valid coping strategy for information overload. However, it can sometimes lead to missing important information." },
                            { text: "(Skim the messages quickly to see if anything is urgent)", feedback: "A good triage strategy. This allows you to stay informed without getting bogged down in every conversation, managing potential anxiety." },
                            { text: "Reply to your aunt: 'Thanks for sharing, I'll take a look when I have a moment!'", feedback: "This is a polite and effective way to manage expectations. You acknowledge the message without feeling pressured to engage immediately." }
                        ]},
                        { message: "You sent a message asking a friend a question an hour ago. You can see they've read it but haven't replied. What do you do?", choices: [
                            { text: "(Send a follow-up message: '???')", feedback: "This can come across as impatient or demanding, potentially adding pressure to the other person and creating tension." },
                            { text: "(Assume they're busy and wait patiently)", feedback: "This is the most mindful choice. People have different communication rhythms. Trusting them to reply when they can reduces anxiety for everyone." },
                            { text: "(Delete the message)", feedback: "Deleting the message out of anxiety or frustration can lead to miscommunication. It's often better to wait or communicate your needs clearly." }
                        ]},
                        { message: "You posted a photo and it's not getting many 'likes'. A friend messages you: 'Bold post! Not worried what people will think?'", choices: [
                            { text: "'Now I am! Should I delete it?'", feedback: "Relying on others' approval for your self-expression can lead to anxiety. It's okay to be confident in what you choose to share." },
                            { text: "'Haha, not at all! I liked it, so I posted it.'", feedback: "A confident and healthy response! This shows that your self-worth isn't tied to online metrics, which is key to digital well-being." },
                            { text: "I guess so. Thanks.", feedback: "This reply is a bit passive. It's an opportunity to assert that you are comfortable with your own post." }
                        ]},
                        { message: "A friend replies to your detailed message with just a single 'ðŸ‘' emoji.", choices: [
                            { text: "(Overthink it: 'Are they mad at me?')", feedback: "It's easy to read negative intent into brief messages. Often, it just means the person is busy. Try to give them the benefit of the doubt." },
                            { text: "(Reply with 'ðŸ‘')", feedback: "A simple and effective way to acknowledge their acknowledgement without adding unnecessary stress or words." },
                            { text: "Is everything okay?", feedback: "While caring, asking this can sometimes create pressure. Assume it's just a quick reply unless you have a real reason to be concerned." }
                        ]},
                        { message: "Your phone buzzes. Notifications show: '3 Missed Calls from Mom', '15 new messages in Project Group', 'You have a new follower'. What do you check first?", choices: [
                            { text: "The new follower notification.", feedback: "The lure of social validation is strong, but it's often the least urgent. This is a classic example of attention fragmentation." },
                            { text: "The missed calls from Mom.", feedback: "A good choice. Prioritizing direct, personal communication from close contacts is often the most important." },
                            { text: "The project group messages.", feedback: "This is also a valid priority, especially if there's a deadline. The key is to make a conscious choice rather than reacting to the newest notification." }
                        ]}
                    ]
                },
                zh: {
                    exit_button: "å‡ºå£",
                    welcome_title: "ReplyWell æ¨¡æ‹Ÿå™¨",
                    welcome_subtitle: "åœ¨ä¸€ä¸ªå®‰å…¨çš„çŽ¯å¢ƒä¸­ï¼Œç»ƒä¹ å¤„ç†å¸¸è§çš„é«˜åŽ‹çŸ­ä¿¡ã€‚æ²¡æœ‰çœŸäººï¼Œæ²¡æœ‰çœŸæ­£çš„åŽ‹åŠ›ã€‚",
                    start_button: "å¼€å§‹ç¬¬ä¸€ä¸ªåœºæ™¯",
                    summary_title: "æ ¸å¿ƒè¦ç‚¹",
                    summary_subtitle: "æ­£å¿µæ²Ÿé€šä¸æ˜¯å¿½è§†ä»–äººï¼Œè€Œæ˜¯ä»¥å°Šé‡ä»–äººå’Œè‡ªå·±çš„æ–¹å¼å›žåº”ã€‚è®¾å®šç•Œé™æ˜¯å¥åº·çš„ã€‚",
                    practice_again_button: "å†æ¬¡ç»ƒä¹ ",
                    next_scenario_button: "ä¸‹ä¸€ä¸ªåœºæ™¯ â†’",
                    view_summary_button: "æŸ¥çœ‹æ€»ç»“ â†’",
                    action_text: "ä½ é€‰æ‹©äº†ï¼š",
                    change_language_button: "Switch to English",
                    scenarios: [
                        { message: "å˜¿ï¼Œåœ¨å—ï¼Ÿï¼Ÿæˆ‘çŽ°åœ¨å°±éœ€è¦é‚£ä»½æŠ¥å‘Šè‰ç¨¿ï¼Œèƒ½å‘ç»™æˆ‘å—ï¼Ÿ", choices: [
                            { text: "éžå¸¸æŠ±æ­‰è€½æäº†ï¼æ˜¯çš„ï¼Œé©¬ä¸Šå°±åŠžï¼", feedback: "è¿™æ ·åšå¯ä»¥è§£å†³çœ¼å‰çš„é—®é¢˜ï¼Œä½†æ€»æ˜¯ä¼˜å…ˆå¤„ç†åˆ«äººçš„ç´§æ€¥äº‹åŠ¡ä¼šå¯¼è‡´èŒä¸šå€¦æ€ ã€‚" },
                            { text: "å˜¿ï¼æˆ‘æ­£åœ¨å¿™åˆ«çš„äº‹ï¼Œä½†å¤§çº¦15åˆ†é’ŸåŽå¯ä»¥å‘ç»™ä½ ã€‚", feedback: "éžå¸¸æ£’ï¼ä½ ç¡®è®¤äº†è¯·æ±‚ï¼Œç®¡ç†äº†å¯¹æ–¹çš„æœŸæœ›ï¼Œä¹Ÿä¿æŠ¤äº†è‡ªå·±çš„ä¸“æ³¨åŠ›ã€‚" },
                            { text: "ï¼ˆæš‚æ—¶å¿½ç•¥è¿™æ¡æ¶ˆæ¯ï¼‰", feedback: "å¿½ç•¥æœ‰æ—¶ä¼šç»™æ¯ä¸ªäººéƒ½å¸¦æ¥æ›´å¤šç„¦è™‘ã€‚ä¸€æ¡è®¾å®šé¢„æœŸçš„ç®€çŸ­æ¶ˆæ¯é€šå¸¸åŽ‹åŠ›æ›´å°ã€‚" }
                        ]},
                        { message: "æŠ±æ­‰è¿™ä¹ˆæ™šæ‰“æ‰°ä½ ï¼Œä½†ä½ èƒ½å¿«é€Ÿçœ‹ä¸€ä¸‹æ˜Žå¤©æ—©ä¼šè¦ç”¨çš„å¹»ç¯ç‰‡å—ï¼Ÿ", choices: [
                            { text: "æ²¡é—®é¢˜ï¼Œå‘è¿‡æ¥å§ã€‚", feedback: "ä¹äºŽåŠ©äººæ˜¯å¥½äº‹ï¼Œä½†å·¥ä½œåˆ°æ·±å¤œä¼šå½±å“ä½ çš„ç¡çœ å’Œå¥åº·ã€‚è¦ä¿æŠ¤å¥½ä½ çš„ä¸ªäººæ—¶é—´ã€‚" },
                            { text: "ä½ å¥½ï¼æˆ‘æ™šä¸Šå·²ç»ä¸‹çº¿äº†ï¼Œä½†æˆ‘æ˜Žå¤©æ—©ä¸Šä¼šç¬¬ä¸€æ—¶é—´æŸ¥çœ‹ã€‚", feedback: "ä¸€ä¸ªå®Œç¾Žçš„ç­”å¤ã€‚ä½ ç¤¼è²Œåœ°è®¾å®šäº†æ¸…æ™°çš„ç•Œé™ï¼ŒåŒæ—¶ä»ç„¶æ˜¯ä¸€ä¸ªæœ‰å›¢é˜Ÿç²¾ç¥žçš„æˆå‘˜ã€‚" },
                            { text: "æˆ‘å·²ç»ä¸ŠåºŠäº†ã€‚", feedback: "è™½ç„¶è¯šå®žï¼Œä½†è¿™æœ‰æ—¶å¯èƒ½å¬èµ·æ¥æœ‰ç‚¹ç”Ÿç¡¬ã€‚åœ¨å·¥ä½œåœºåˆï¼Œä¸€ä¸ªç¨å¾®æ­£å¼ä¸€ç‚¹çš„ç•Œé™å¯èƒ½æ›´æœ‰å¸®åŠ©ã€‚" }
                        ]},
                        { message: "ä»Šæ™šæœ‰ä»€ä¹ˆå®‰æŽ’ï¼Ÿæˆ‘ä»¬å‡ ä¸ªäººè¦å‡ºåŽ»çŽ©ã€‚", choices: [
                            { text: "æ²¡å®‰æŽ’ï¼Œä½ ä»¬è¦åŽ»å“ªå„¿ï¼Ÿï¼", feedback: "è¯´èµ°å°±èµ°å¾ˆæ£’ï¼Œä½†è¦å…ˆé—®é—®è‡ªå·±çš„å†…å¿ƒã€‚ä½ æ˜¯å‡ºäºŽå…´å¥‹ï¼Œè¿˜æ˜¯å› ä¸ºå®³æ€•é”™è¿‡ï¼ˆFOMOï¼‰ï¼Ÿ" },
                            { text: "å¬èµ·æ¥ä¸é”™ï¼æˆ‘ä»Šæ™šæ‰“ç®—åœ¨å®¶å……ç”µï¼Œç¥ä½ ä»¬çŽ©å¾—å¼€å¿ƒï¼", feedback: "ä¸€ç§å¾ˆæ£’çš„æ‹’ç»æ–¹å¼ã€‚ä½ æ—¢è¡¨è¾¾äº†ç§¯æžçš„æ€åº¦ï¼Œåˆä¼˜å…ˆè€ƒè™‘äº†è‡ªå·±ä¼‘æ¯çš„éœ€æ±‚ã€‚" },
                            { text: "ï¼ˆå·²è¯»ä¸å›žï¼Œå…ˆè€ƒè™‘ä¸€ä¸‹ï¼‰", feedback: "è¿™å¯èƒ½ä¼šè®©ä½ çš„æœ‹å‹å¹²ç­‰ï¼Œä¹Ÿç»™ä½ è‡ªå·±å¸¦æ¥åŽ‹åŠ›ã€‚ä¸€ä¸ªå¿«é€Ÿã€è¯šå®žçš„â€œä¸â€é€šå¸¸æ¯”ä¸€ä¸ªç¼“æ…¢ã€ä¸ç¡®å®šçš„â€œä¹Ÿè®¸â€æ›´å‹å–„ã€‚" }
                        ]},
                        { message: "ä½ çš„æœ‹å‹å‘æ¥ä¸€å¼ å¥¢åŽçš„åº¦å‡ç…§ç‰‡ï¼š'åœ¨å·´åŽ˜å²›çŽ©å¾—å¤ªå¼€å¿ƒäº†ï¼ä½ çœŸè¯¥æ¥çš„ï¼'", choices: [
                            { text: "'å“‡ï¼Œå¤ªç¾¡æ…•äº†ï¼çœ‹èµ·æ¥å¥½æ£’ï¼'", feedback: "æ„Ÿåˆ°ä¸€ä¸å«‰å¦’æ˜¯æ­£å¸¸çš„ã€‚æ‰¿è®¤ä»–ä»¬çš„å¿«ä¹æ˜¯å¥½äº‹ï¼Œä½†è¦æ³¨æ„ä»–ä»¬çš„ç²¾å½©ç”Ÿæ´»å¦‚ä½•å½±å“ä½ è‡ªå·±çš„æ„Ÿå—ã€‚" },
                            { text: "'å¤ªæ£’äº†ï¼çœŸä¸ºä½ é«˜å…´ã€‚å¸Œæœ›ä½ çŽ©å¾—å¼€å¿ƒã€‚'", feedback: "ä¸€ä¸ªæžå¥½çš„ã€æ”¯æŒæ€§çš„å›žåº”ï¼Œæ—¢ä¸ºä»–ä»¬çš„å¿«ä¹åº†ç¥ï¼Œåˆæ²¡æœ‰è´¬ä½Žè‡ªå·±çš„çŠ¶æ€ã€‚è¿™æ˜¯åº”å¯¹ç¤¾äº¤åª’ä½“æ”€æ¯”çš„å¥åº·æ–¹å¼ã€‚" },
                            { text: "ï¼ˆåªç‚¹èµžæ¶ˆæ¯ï¼Œä¸å›žå¤ï¼‰", feedback: "è¿™æ˜¯ä¸€ä¸ªä½ŽæŠ•å…¥çš„å›žåº”ã€‚å¦‚æžœä½ å¿ƒæƒ…ä¸å¥½ï¼Œä¸å‚ä¸Žæ˜¯å¯ä»¥çš„ï¼Œä½†ä¸€æ¡ç®€çŸ­å‹å¥½çš„æ¶ˆæ¯å¯¹å‹è°Šæ›´å¥½ã€‚" }
                        ]},
                        { message: "æ¥è‡ªä½ çš„å°ç»„é¡¹ç›®èŠå¤©ï¼š'ä½ å¼€å§‹åšä½ çš„ç ”ç©¶éƒ¨åˆ†äº†å—ï¼Ÿæˆ–è€…æˆ‘ä»¬ç›´æŽ¥è®©ChatGPTå†™ï¼Ÿ'", choices: [
                            { text: "'æˆ‘ä»¬ç”¨ChatGPTå§ï¼Œè¿™æ ·æ›´å¿«ã€‚'", feedback: "è™½ç„¶ä¸ºäº†é€Ÿåº¦å¾ˆè¯±äººï¼Œä½†è¿‡åº¦ä¾èµ–AIä¼šå¦¨ç¢å­¦ä¹ ã€‚ä»Žé•¿è¿œæ¥çœ‹ï¼Œè¿™ä¼šå¢žåŠ ä¾èµ–ç„¦è™‘ã€‚" },
                            { text: "'æˆ‘å·²ç»å¼€å§‹æˆ‘çš„ç ”ç©¶äº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨AIæ¥èŽ·å–æƒ³æ³•æˆ–æ¶¦è‰²æ–‡ç¨¿ï¼Œä½†æ ¸å¿ƒéƒ¨åˆ†åº”è¯¥æˆ‘ä»¬è‡ªå·±å†™ã€‚'", feedback: "è¿™æ˜¯ä¸€ä¸ªå¹³è¡¡ä¸”ç¬¦åˆé“å¾·çš„æ–¹æ³•ã€‚å®ƒå°†AIä½œä¸ºå·¥å…·ä½¿ç”¨ï¼Œè€Œæ²¡æœ‰ç‰ºç‰²ä½ è‡ªå·±å·¥ä½œå’Œå­¦ä¹ çš„å®Œæ•´æ€§ã€‚" },
                            { text: "'æˆ‘ä¸ä¿¡ä»»AIèƒ½åšè¿™ä¸ªã€‚'", feedback: "è°¨æ…Žæ˜¯æ˜Žæ™ºçš„ã€‚ä¸€ä¸ªæ›´å…·å»ºè®¾æ€§çš„æ–¹æ³•å¯èƒ½æ˜¯å»ºè®®å®ƒ*å¯ä»¥*è¢«ä½¿ç”¨çš„å…·ä½“æ–¹å¼ï¼Œä¸ºå›¢é˜Ÿå®šä¹‰æ¸…æ™°çš„ç•Œé™ã€‚" }
                        ]},
                        { message: "ä½ åœ¨â€œå®¶åº­ç¾¤èŠâ€ä¸­çœ‹åˆ°'20+æ¡æœªè¯»æ¶ˆæ¯'ã€‚æœ€æ–°ä¸€æ¡æ˜¯é˜¿å§¨å‘çš„ï¼š'å¤§å®¶éƒ½çœ‹åˆ°æˆ‘å‘çš„å…³äºŽæ–°å¥åº·ææ…Œçš„æ–‡ç« äº†å—ï¼Ÿ'", choices: [
                            { text: "ï¼ˆæ„Ÿåˆ°åŽ‹åŠ›ï¼Œå°†èŠå¤©é™éŸ³ï¼‰", feedback: "å¯¹äºŽä¿¡æ¯è¿‡è½½ï¼Œé™éŸ³æ˜¯ä¸€ç§æœ‰æ•ˆçš„åº”å¯¹ç­–ç•¥ã€‚ç„¶è€Œï¼Œå®ƒæœ‰æ—¶å¯èƒ½å¯¼è‡´é”™è¿‡é‡è¦ä¿¡æ¯ã€‚" },
                            { text: "ï¼ˆå¿«é€Ÿæµè§ˆæ¶ˆæ¯ï¼Œçœ‹æœ‰æ²¡æœ‰ç´§æ€¥çš„äº‹ï¼‰", feedback: "ä¸€ä¸ªå¾ˆå¥½çš„åˆ†ç±»ç­–ç•¥ã€‚è¿™è®©ä½ èƒ½ä¿æŒä¿¡æ¯é€šç•…ï¼Œè€Œä¸ä¼šé™·å…¥æ¯ä¸€åœºå¯¹è¯ï¼Œä»Žè€Œç®¡ç†æ½œåœ¨çš„ç„¦è™‘ã€‚" },
                            { text: "å›žå¤ä½ çš„é˜¿å§¨ï¼š'è°¢è°¢åˆ†äº«ï¼Œæˆ‘æœ‰ç©ºä¼šçœ‹çš„ï¼'", feedback: "è¿™æ˜¯ä¸€ç§ç¤¼è²Œè€Œæœ‰æ•ˆçš„æ–¹å¼æ¥ç®¡ç†æœŸæœ›ã€‚ä½ ç¡®è®¤äº†æ¶ˆæ¯ï¼Œè€Œæ²¡æœ‰æ„Ÿåˆ°å¿…é¡»ç«‹å³å‚ä¸Žçš„åŽ‹åŠ›ã€‚" }
                        ]},
                        { message: "ä½ ä¸€å°æ—¶å‰ç»™æœ‹å‹å‘æ¶ˆæ¯é—®äº†ä¸€ä¸ªé—®é¢˜ã€‚ä½ å¯ä»¥çœ‹åˆ°ä»–ä»¬å·²ç»è¯»äº†ä½†æ²¡æœ‰å›žå¤ã€‚ä½ è¯¥æ€Žä¹ˆåŠžï¼Ÿ", choices: [
                            { text: "ï¼ˆå†å‘ä¸€æ¡æ¶ˆæ¯ï¼š'ï¼Ÿï¼Ÿï¼Ÿ'ï¼‰", feedback: "è¿™å¯èƒ½ä¼šè¢«çœ‹ä½œä¸è€çƒ¦æˆ–è‹›åˆ»ï¼Œå¯èƒ½ç»™å¯¹æ–¹å¢žåŠ åŽ‹åŠ›å¹¶é€ æˆç´§å¼ å…³ç³»ã€‚" },
                            { text: "ï¼ˆå‡è®¾ä»–ä»¬å¾ˆå¿™ï¼Œè€å¿ƒç­‰å¾…ï¼‰", feedback: "è¿™æ˜¯æœ€æ­£å¿µçš„é€‰æ‹©ã€‚äººä»¬æœ‰ä¸åŒçš„æ²Ÿé€šèŠ‚å¥ã€‚ç›¸ä¿¡ä»–ä»¬èƒ½åœ¨æœ‰ç©ºæ—¶å›žå¤ï¼Œå¯ä»¥å‡å°‘æ¯ä¸ªäººçš„ç„¦è™‘ã€‚" },
                            { text: "ï¼ˆåˆ é™¤æ¶ˆæ¯ï¼‰", feedback: "å‡ºäºŽç„¦è™‘æˆ–æ²®ä¸§è€Œåˆ é™¤æ¶ˆæ¯å¯èƒ½å¯¼è‡´æ²Ÿé€šä¸ç•…ã€‚é€šå¸¸æœ€å¥½æ˜¯ç­‰å¾…æˆ–æ¸…æ¥šåœ°æ²Ÿé€šä½ çš„éœ€æ±‚ã€‚" }
                        ]},
                        { message: "ä½ åˆšå‘äº†ä¸€å¼ ç…§ç‰‡ï¼Œä½†æ²¡æœ‰å¾—åˆ°é¢„æœŸçš„'èµž'ã€‚ä¸€ä¸ªæœ‹å‹ç»™ä½ å‘æ¶ˆæ¯ï¼š'å‘å¾—å¾ˆå¤§èƒ†å•Šï¼ä¸æ‹…å¿ƒåˆ«äººæ€Žä¹ˆæƒ³å—ï¼Ÿ'", choices: [
                            { text: "'çŽ°åœ¨æˆ‘æ‹…å¿ƒäº†ï¼æˆ‘åº”è¯¥åˆ æŽ‰å—ï¼Ÿ'", feedback: "ä¾èµ–ä»–äººçš„æ‰¹å‡†æ¥è¡¨è¾¾è‡ªå·±ä¼šå¯¼è‡´ç„¦è™‘ã€‚å¯¹è‡ªå·±é€‰æ‹©åˆ†äº«çš„å†…å®¹æœ‰ä¿¡å¿ƒæ˜¯æ²¡é—®é¢˜çš„ã€‚" },
                            { text: "'å“ˆå“ˆï¼Œå®Œå…¨ä¸ï¼æˆ‘å–œæ¬¢å°±å‘äº†ã€‚'", feedback: "ä¸€ä¸ªè‡ªä¿¡å¥åº·çš„å›žåº”ï¼è¿™è¡¨æ˜Žä½ çš„è‡ªæˆ‘ä»·å€¼ä¸Žåœ¨çº¿æŒ‡æ ‡æ— å…³ï¼Œè¿™æ˜¯æ•°å­—å¹¸ç¦æ„Ÿçš„å…³é”®ã€‚" },
                            { text: "æˆ‘æƒ³æ˜¯å§ã€‚è°¢è°¢ã€‚", feedback: "è¿™ä¸ªå›žå¤æœ‰ç‚¹è¢«åŠ¨ã€‚è¿™æ˜¯ä¸€ä¸ªåšæŒä½ å¯¹è‡ªå·±å¸–å­çš„èˆ’é€‚åº¦çš„æœºä¼šã€‚" }
                        ]},
                        { message: "ä½ çš„æœ‹å‹åªç”¨ä¸€ä¸ª'ðŸ‘'è¡¨æƒ…ç¬¦å·å›žå¤äº†ä½ çš„è¯¦ç»†ä¿¡æ¯ã€‚", choices: [
                            { text: "ï¼ˆè¿‡åº¦æ€è€ƒï¼š'ä»–ä»¬æ˜¯ä¸æ˜¯ç”Ÿæˆ‘æ°”äº†ï¼Ÿ'ï¼‰", feedback: "å¾ˆå®¹æ˜“ä»Žç®€çŸ­çš„æ¶ˆæ¯ä¸­è¯»å‡ºè´Ÿé¢æ„å›¾ã€‚é€šå¸¸ï¼Œè¿™åªæ„å‘³ç€å¯¹æ–¹å¾ˆå¿™ã€‚è¯•ç€ç›¸ä¿¡ä»–ä»¬æ˜¯å–„æ„çš„ã€‚" },
                            { text: "ï¼ˆå›žå¤'ðŸ‘'ï¼‰", feedback: "ä¸€ç§ç®€å•æœ‰æ•ˆçš„æ–¹å¼æ¥ç¡®è®¤ä»–ä»¬çš„ç¡®è®¤ï¼Œè€Œæ— éœ€å¢žåŠ ä¸å¿…è¦çš„åŽ‹åŠ›æˆ–è¨€è¯­ã€‚" },
                            { text: "ä¸€åˆ‡éƒ½è¿˜å¥½å—ï¼Ÿ", feedback: "è™½ç„¶å…³å¿ƒï¼Œä½†è¿™æ ·é—®æœ‰æ—¶ä¼šé€ æˆåŽ‹åŠ›ã€‚é™¤éžä½ æœ‰çœŸæ­£çš„ç†ç”±æ‹…å¿ƒï¼Œå¦åˆ™å°±å‡è®¾è¿™åªæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„å›žå¤ã€‚" }
                        ]},
                        { message: "ä½ çš„æ‰‹æœºå“äº†ã€‚é€šçŸ¥æ˜¾ç¤ºï¼š'3ä¸ªå¦ˆå¦ˆçš„æœªæŽ¥æ¥ç”µ'ï¼Œ'é¡¹ç›®ç»„æœ‰15æ¡æ–°æ¶ˆæ¯'ï¼Œ'ä½ æœ‰ä¸€ä¸ªæ–°ç²‰ä¸'ã€‚ä½ å…ˆçœ‹å“ªä¸ªï¼Ÿ", choices: [
                            { text: "æ–°ç²‰ä¸é€šçŸ¥ã€‚", feedback: "ç¤¾äº¤è®¤å¯çš„è¯±æƒ‘å¾ˆå¼ºçƒˆï¼Œä½†è¿™é€šå¸¸æ˜¯æœ€ä¸ç´§æ€¥çš„ã€‚è¿™æ˜¯æ³¨æ„åŠ›ç¢Žç‰‡åŒ–çš„å…¸åž‹ä¾‹å­ã€‚" },
                            { text: "å¦ˆå¦ˆçš„æœªæŽ¥æ¥ç”µã€‚", feedback: "ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä¼˜å…ˆå¤„ç†æ¥è‡ªäº²å¯†è”ç³»äººçš„ç›´æŽ¥ã€ä¸ªäººé€šä¿¡é€šå¸¸æ˜¯æœ€é‡è¦çš„ã€‚" },
                            { text: "é¡¹ç›®ç»„çš„æ¶ˆæ¯ã€‚", feedback: "è¿™ä¹Ÿæ˜¯ä¸€ä¸ªåˆç†çš„ä¼˜å…ˆäº‹é¡¹ï¼Œå°¤å…¶æ˜¯åœ¨æœ‰æˆªæ­¢æ—¥æœŸçš„æƒ…å†µä¸‹ã€‚å…³é”®æ˜¯åšå‡ºæœ‰æ„è¯†çš„é€‰æ‹©ï¼Œè€Œä¸æ˜¯å¯¹æœ€æ–°çš„é€šçŸ¥åšå‡ºååº”ã€‚" }
                        ]}
                    ]
                }
            };

            // --- DOM ELEMENTS ---
            const loadingScreen = document.getElementById('loading-screen');
            const languageModal = document.getElementById('language-modal');
            const appWrapper = document.getElementById('app-wrapper');
            const langEnBtn = document.getElementById('lang-en-btn');
            const langZhBtn = document.getElementById('lang-zh-btn');
            const welcomeScreen = document.getElementById('welcome-screen');
            const simulatorScreen = document.getElementById('simulator-screen');
            const summaryScreen = document.getElementById('summary-screen');
            const chatWindow = document.getElementById('chat-window');
            const choicesContainer = document.getElementById('choices-container');
            const startBtn = document.getElementById('start-btn');
            const practiceAgainBtn = document.getElementById('practice-again-btn');
            const changeLangBtn = document.getElementById('change-lang-btn');

            // --- FUNCTIONS ---
            function translateUI() {
                const lang = AppState.currentLanguage;
                const t = Translations[lang];
                document.documentElement.lang = lang;
                document.querySelectorAll('[data-translate-key]').forEach(el => {
                    const key = el.dataset.translateKey;
                    if (t[key]) el.textContent = t[key];
                });
            }

            function setLanguage(lang) {
                AppState.currentLanguage = lang;
                localStorage.setItem('userLanguage', lang);
                translateUI();
                languageModal.classList.add('hidden');
                appWrapper.classList.remove('hidden');
                showScreen(welcomeScreen);
            }

            function showLanguageSelection() {
                appWrapper.classList.add('hidden');
                languageModal.classList.remove('hidden');
            }
            
            function showScreen(screenToShow) {
                [welcomeScreen, simulatorScreen, summaryScreen].forEach(screen => {
                    screen.classList.add('hidden');
                });
                screenToShow.classList.remove('hidden');
            }

            function showOutcome(choiceText, feedbackText) {
                choicesContainer.innerHTML = ''; 

                if (choiceText.startsWith('(')) {
                    const actionEl = document.createElement('div');
                    actionEl.className = 'message-bubble feedback';
                    actionEl.textContent = `${Translations[AppState.currentLanguage].action_text} ${choiceText.slice(1, -1)}`;
                    chatWindow.appendChild(actionEl);
                } else {
                    const outgoingEl = document.createElement('div');
                    outgoingEl.className = 'message-bubble outgoing';
                    outgoingEl.textContent = choiceText;
                    chatWindow.appendChild(outgoingEl);
                }

                setTimeout(() => {
                    const feedbackEl = document.createElement('div');
                    feedbackEl.className = 'message-bubble feedback';
                    feedbackEl.textContent = feedbackText;
                    chatWindow.appendChild(feedbackEl);
                    chatWindow.scrollTop = chatWindow.scrollHeight;
                }, 800);

                setTimeout(() => {
                    const nextButton = document.createElement('button');
                    nextButton.className = 'choice-btn';
                    if (AppState.currentScenarioIndex < Translations[AppState.currentLanguage].scenarios.length - 1) {
                        nextButton.textContent = Translations[AppState.currentLanguage].next_scenario_button;
                        nextButton.onclick = nextScenario;
                    } else {
                        nextButton.textContent = Translations[AppState.currentLanguage].view_summary_button;
                        nextButton.onclick = showSummary;
                    }
                    choicesContainer.appendChild(nextButton);
                }, 1600);
            }

            function renderScenario(scenario) {
                chatWindow.innerHTML = '';
                choicesContainer.innerHTML = '';

                const incomingEl = document.createElement('div');
                incomingEl.className = 'message-bubble incoming';
                incomingEl.textContent = scenario.message;
                chatWindow.appendChild(incomingEl);

                scenario.choices.forEach(choice => {
                    const choiceBtn = document.createElement('button');
                    choiceBtn.className = 'choice-btn';
                    choiceBtn.textContent = choice.text;
                    choiceBtn.onclick = () => showOutcome(choice.text, choice.feedback);
                    choicesContainer.appendChild(choiceBtn);
                });
            }

            function nextScenario() {
                AppState.currentScenarioIndex++;
                const scenarios = Translations[AppState.currentLanguage].scenarios;
                renderScenario(scenarios[AppState.currentScenarioIndex]);
            }
            
            function showSummary() {
                showScreen(summaryScreen);
            }

            function startSimulator() {
                AppState.currentScenarioIndex = 0;
                const scenarios = Translations[AppState.currentLanguage].scenarios;
                scenarios.sort(() => 0.5 - Math.random());
                showScreen(simulatorScreen);
                renderScenario(scenarios[AppState.currentScenarioIndex]);
            }

            // --- EVENT LISTENERS ---
            langEnBtn.addEventListener('click', () => setLanguage('en'));
            langZhBtn.addEventListener('click', () => setLanguage('zh'));
            changeLangBtn.addEventListener('click', showLanguageSelection);
            startBtn.addEventListener('click', startSimulator);
            practiceAgainBtn.addEventListener('click', startSimulator);
            
            // --- UPDATED: Initialization with Loading Screen ---
            function init() {
                const savedLang = localStorage.getItem('userLanguage');
                if (savedLang) {
                    AppState.currentLanguage = savedLang;
                    translateUI();
                }

                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                        languageModal.classList.remove('hidden');
                    }, 500);
                }, 2000);
            }

            init();
        });
    </script>
</body>
</html>